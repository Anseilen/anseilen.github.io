function signUp(){$(function(){this.$signupSubmit=$("#signup-form__submit"),this.$signupErrorMessage=$("#signup-errorMessag"),this.$signupSubmit.on("click",this.submit.bind(this))}.bind(this))}firebase.auth().currentUser&&window.location.replace("/"),signUp.prototype.submit=function(e){e.preventDefault(),this.$signupErrorMessage.text("");var n=$("#inputPassword1").val();if(n!==$("#inputPassword2").val())return void this.$signupErrorMessage.text("비밀번호가 일치하지 않습니다.");var t={},i=$("#inputEmail").val(),r=n;t.email=i,t.phone=$("#inputPhone").val(),t.gender=$("#signup-form input[name=genderRadios]:checked").val(),t.funnel=$("#signup-form input[name=funnelRadios]:checked").val(),firebase.auth().createUserWithEmailAndPassword(i,r).then(function(e){$("#signup-form__submit").attr("disabled",!0),$("#signup-form__submit__spinner").css("display","inline-block"),e.user.sendEmailVerification(),firebase.auth().currentUser.getIdToken().then(function(e){var n={method:"POST",url:"/api/register",dataType:"text",contentType:"application/json",data:JSON.stringify(t),beforeSend:function(n){n.setRequestHeader("Authorization","Bearer "+e)}};return $.ajax(n).done(function(){alert("인증메일을 보냈습니다. 확인해주세요."),firebase.auth().signOut().then(function(){sessionStorage.clear(),window.location.replace("/")})}).fail(function(e,n){console.error(e.status,n),alert("인증메일을 보냈습니다. 확인해주세요."),firebase.auth().signOut().then(function(){sessionStorage.clear(),window.location.replace("/")})})}).catch(function(e){console.error("error"),console.error(JSON.stringify(e)),firebase.auth().signOut().then(function(){sessionStorage.clear(),window.location.replace("/")}),alert("")})}).catch(function(e){let n;n="auth/weak-password"===e.code?"비밀번호는 최소 6자리 이상이어야 합니다.":"auth/invalid-email"===e.code?"이메일 형태를 확인해주세요.":"auth/email-already-in-use"===e.code?"이미 사용 중인 이메일 입니다.":e.message,document.getElementById("signup-errorMessage").innerText=n})},signUp.prototype.createProfile=function(e,n){var t={method:"POST",url:"/api/register",dataType:"json",contentType:"application/json",data:JSON.stringify(e),beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+n)}};return $.ajax(t).catch(function(e){throw new Error("Request create account error:"+e)})},window.signup=new signUp;