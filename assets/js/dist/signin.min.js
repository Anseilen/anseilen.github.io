firebase.auth().currentUser&&window.location.replace("/"),$(document).on("click","#signin-form__submit",function(e){e.preventDefault(),$("#signin-form__submit").attr("disabled",!0),$("#signin-form__submit__spinner").css("display","inline-block");var s=$("#inputEmail").val(),n=$("#inputPassword").val();firebase.auth().setPersistence(firebase.auth.Auth.Persistence.SESSION).then(function(){return firebase.auth().signInWithEmailAndPassword(s,n)}).then(function(e){$("#inputEmail").val(""),$("#inputPassword").val(""),$("#signin-form__submit").attr("disabled",!1),$("#signin-form__submit__spinner").css("display","none"),e.user.emailVerified||(e.user.sendEmailVerification().then(function(){$("#signin-errorMessage").html("<p>인증되지 않은 이메일(아이디)입니다.<br/>입력하신 이메일로 인증메일을 전송하였습니다.</p>")}).catch(function(){$("#signin-errorMessage").html("<p>인증되지 않은 이메일(아이디)입니다.<br/>잠시후 다시 시도해주시면 인증메일이 전송됩니다.</p>")}),firebase.auth().signOut(),sessionStorage.clear())}).catch(function(e){var s=e.code;let n=e.message;"auth/network-request-failed"===s?n="네트워크가 불안정 합니다. 잠시후 다시 시도해주세요.":"auth/too-many-requests"===s?n="너무 많이 시도 했습니다. 잠시후 다시 시도해주세요.":"auth/user-disabled"===s?n="계정이 사용 정지되었습니다. 고객센터로 문의해주세요.":"auth/user-not-found"===s?n="사용자를 찾을 수 없습니다. 이메일을 확인해주세요.":"auth/wrong-password"===s?n="비밀번호가 잘못되었습니다.":"auth/invalid-email"===s&&(n="적합하지 않은 이메일입니다."),$("#signin-errorMessage").text(n),$("#signin-form__submit").attr("disabled",!1),$("#signin-form__submit__spinner").css("display","none")})}),$(document).on("click","#passwordforget-form__submit",function(e){e.preventDefault();var s=$("#passwordForgetEmail").val();firebase.auth().sendPasswordResetEmail(s).then(function(){$("#passwordforget-errorMessage").text(""),$("#passwordforget-form").css({display:"none"}),$(".modal-body").append('<h6 class="text-success">메일을 전송했습니다. 메일함을 확인해주세요</h6>')}).catch(function(e){var s=e.code;let n=e.message;"auth/network-request-failed"===s?n="네트워크가 불안정 합니다. 잠시후 다시 시도해주세요.":"auth/too-many-requests"===s?n="너무 많이 시도 했습니다. 잠시후 다시 시도해주세요.":"auth/user-disabled"===s?n="계정이 사용 정지되었습니다. 고객센터로 문의해주세요.":"auth/user-not-found"===s?n="사용자를 찾을 수 없습니다. 이메일을 확인해주세요.":"auth/wrong-password"===s?n="비밀번호가 잘못되었습니다.":"auth/invalid-email"===s&&(n="적합하지 않은 이메일입니다."),$("#passwordforget-errorMessage").text(n)})}),$(document).on("click","#google-signin",function(e){e.preventDefault();var s=new firebase.auth.GoogleAuthProvider;s.addScope("https://www.googleapis.com/auth/contacts.readonly"),firebase.auth().languageCode="kr",firebase.auth().signInWithPopup(s).then(function(e){var s=e.credential.accessToken,n=e.user;console.log(s,n)}).catch(function(e){var s=e.code,n=e.message,t=e.email,a=e.credential;console.log(s,n,t,a)})});