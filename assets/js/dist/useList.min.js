function useList(){$(function(){if(sessionStorage.getItem("cct")&&(new Date).getTime()-sessionStorage.getItem("cct")<sessionStorage.getItem("cctd")){if(sessionStorage.getItem("uitems")){var t=JSON.parse(sessionStorage.getItem("uitems"));t.forEach(function(t){var e=t.requestDate.substr(0,10);$("#useTable tbody").append("<tr><td>"+e+"</td><td>"+t.name+"</td><td>"+t.status+"</td></tr>")})}}else sessionStorage.removeItem("uitems");firebase.auth().onAuthStateChanged(function(t){t&&(sessionStorage.getItem("ctimes")||($("#useTable tbody tr").remove(),$("#useTable tbody").append('<tr><td><div class="spinner-border" role="status"><span class="sr-only">Loading...</span></div></td></tr>'),firebase.auth().currentUser.getIdToken().then(function(t){var e={method:"GET",url:"/api/usages",dataType:"json",beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+t)}};return $.ajax(e).done(function(t){$("#useTable tbody tr").remove(),t.items.forEach(function(t){var e=t.requestDate.substr(0,10);$("#useTable tbody").append("<tr><td>"+e+"</td><td>"+t.name+"</td><td>"+t.status+"</td></tr>")}),sessionStorage.setItem("uitems",JSON.stringify(t.items))})})))}),this.$getListButton=$("#useBtn"),this.$appendListButton=$("#useMoreBtn"),this.$appendListButton.on("click",this.appendList.bind(this)),this.$getListButton.on("click",this.getInitList.bind(this))}.bind(this))}useList.prototype.getInitList=function(){$("#useTable tbody tr").remove(),$("#useTable tbody").append('<tr><td><div class="spinner-border" role="status"><span class="sr-only">Loading...</span></div></td></tr>'),firebase.auth().currentUser.getIdToken().then(function(t){var e={method:"GET",url:"/api/usages",dataType:"json",beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+t)}};return $.ajax(e).done(function(t){$("#useTable tbody tr").remove(),t.items.forEach(function(t){var e=t.requestDate.substr(0,10);$("#useTable tbody").append("<tr><td>"+e+"</td><td>"+t.name+"</td><td>"+t.status+"</td></tr>")}),sessionStorage.setItem("uitems",JSON.stringify(t.items))})})},useList.prototype.appendList=function(){var t=JSON.parse(sessionStorage.getItem("uitems")),e=t[t.length-1].id;firebase.auth().currentUser.getIdToken().then(function(t){var s={method:"GET",url:"/api/usages?last="+e,dataType:"json",beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+t)}};return $.ajax(s).done(function(t){if(t.items.length){t.items.forEach(function(t){var e=t.requestDate.substr(0,10);$("#useTable tbody").append("<tr><td>"+e+"</td><td>"+t.name+"</td><td>"+t.status+"</td></tr>")});var e=JSON.parse(sessionStorage.getItem("uitems")),s=e.concat(t.items);sessionStorage.setItem("uitems",JSON.stringify(s))}else alert("더 이상 조회가능한 내역이 없습니다.")})})},window.sy_ul=new useList;